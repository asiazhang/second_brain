# 任何机器都可以作为构建机

> 必要时，只要使用相同的签入脚本，任何开发人员的机器都可以作为构建机。我们的目标是任何有构建条件的机器都应当能完成与构建机完全相同的构建（除了时间戳、IP地址或机器名等有所不同之外）。
>
> 要让其他新来的开发人员很轻松的可以在自己的机器上构建出产品，这样他们会信心大增，并且反过来促进你改进自动化。

## 如何起步

1. 让一个团队成员手动地构建你的系统，你做好记录
2. 定义各个构建步骤
3. 选择一个构建工具，同时也要准备其他几种可选工具，以备不时之需。
4. 增量式建立每一个步骤的脚本，逐个删除手动操作
5. 在另一个工作站上运行脚本。这一步可以找出所有偶然出现在个别工作站上的代码。
6. 现在让团队另外一个成员尝试使用这个脚本，你不要提供任何帮助

完成这些后，你就可以轻松构建整个产品并保证：

- 只使用一个命令就可以完成构建
- 会根据源代码管理系统来构建
- 可以在任何团队成员的工作站上构建
- 没有任何外部环境要求（比如特定的网盘）

## 我们的做法

### Impeller

在前面章节提到，我们使用ruby脚本+rake任务来构建Impeller。我们已经把基本所有需要构建的小工具提交到代码服务器了，用户只需要：

- 安装VS2008+SP1
- 下载boost 1.40，并解压到C盘或者D盘的根目录
- 安装Ruby

就已经完成了脚本执行的环境，然后`rake release`就可以编译版本了。

### Navigator2

Navigator2由于采用的是.Net开发，更为简单。`.Net 4.0`已经附带了C#的编译器，所以就不用安装VS了。用户需要：

- 安装`.Net 4.0`
- 安装`Ruby`
- 安装必备Gem包`albacore`

这样就完成了脚本执行的环境，调用对应的rake任务就可以编译版本了。

### Ruby

Ruby构建我们使用标准的rake文件，这个在网上有很多资料，不再过多赘述。